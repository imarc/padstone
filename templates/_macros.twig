{% macro renderBlock(block, blockLoop) %}{% spaceless %}
    {% import _self as macros %}
    {% if block.type == 'sharedBlock' %}
        {% for subblock in block.sharedBlock %}
            {{ macros.renderAllBlocks(subblock.designedContent, loop) }}
        {% endfor %}
    {% else %}
        {% include '/_blocks/' ~ block.type %}
    {% endif %}
{% endspaceless %}{% endmacro %}

{% macro renderAllBlocks(field) %}{% spaceless %}
    {% import _self as macros %}

    {% for block in field.all() %}
        {{ macros.renderBlock(block, loop) }}
    {% endfor %}
{% endspaceless %}{% endmacro %}
